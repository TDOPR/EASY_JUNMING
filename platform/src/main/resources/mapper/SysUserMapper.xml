<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haoliang.mapper.SysUserMapper">

    <select id="findAllByUsernameByRoleId" resultType="java.lang.String">
        SELECT
            username
        FROM
            sys_user
        WHERE
            roleId=#{roleId}
    </select>

    <select id="selectPageVo" resultType="com.haoliang.model.vo.UserVO">
         SELECT
            s.id,s.username,s.name,s.createTime,s.name,s.enabled,s.deleted,s.roleId,s.channelId,sr.roleName,sc.channelName
        FROM
            sys_user s
        LEFT JOIN sys_role sr ON sr.id=s.roleId
        LEFT JOIN sys_channel sc ON sc.id=s.channelId
        WHERE
           sr.roleCode!='admin'
        <if test="username!=null and username!=''">
            AND s.username  LIKE CONCAT('%',#{username},'%')
        </if>
        <if test="beginDate!=null">
            AND s.createTime <![CDATA[ >= ]]> #{beginDate}
        </if>
        <if test="endDate!=null">
            AND s.createTime <![CDATA[ <= ]]> #{endDate}
        </if>
    </select>

</mapper>